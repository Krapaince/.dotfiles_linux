# {{@@ header() @@}}
# vim:fileencoding=utf-8:ft=conf:foldmethod=marker
set $mod Alt

font pango:{{@@ font @@}} 8

input type:keyboard {
  repeat_delay 200
  repeat_rate 50

  xkb_layout "us,fr"
  xkb_variant ",azerty"
  xkb_options "grp:win_space_toggle"
}

exec swayidle \
  timeout 600 'swaymsg "output * dpms off"' \
  timeout 600 '~/.config/sway/scripts/lock.sh' \
  resume 'swaymsg "output * dpms on"'

exec swayidle -w \
  before-sleep 'playerctl pause' \
  before-sleep '~/.config/sway/scripts/lock.sh -f'

focus_follows_mouse no
mouse_warping container

gaps inner 10
gaps outer 0

smart_borders on

popup_during_fullscreen smart

default_border none

# Fix notification windows
for_window [title="Microsoft Teams Notification"] floating enable
for_window [title="Zoom Cloud Meetings"] | floating enable
for_window [title="zoom"] | floating enable
for_window [title="^(?:Coping|Moving) - Dolphin"] floating enable

for_window [title="kitty"] opacity set 0.99
for_window [class="^.*"] border pixel 0

for_window [class="firefox"] inhibit_idle fullscreen
for_window [app_id="firefox" title="^Picture-in-Picture$"] floating enable, inhibit_idle
for_window [class="vlc"] inhibit_idle fullscreen

exec_always import-gsettings.sh
exec gammastep

exec gnome-keyring-daemon --start
exec waybar -c ~/.config/waybar/config.json
# nm-connection-editor as an alternative for now https://github.com/swaywm/sway/issues/1357
exec nm-applet
exec blueman-applet
exec dunst -config ~/.config/dunst/dunstrc
exec {{@@ wallpaper_script @@}} change

include ./bindings
include ./workspace

include /etc/sway/config.d/50-systemd-user.conf
